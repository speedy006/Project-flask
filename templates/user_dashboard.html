<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>User Dashboard | F1 Esports Fantasy League</title>

  <link rel="stylesheet" href="{{ url_for('static', filename='css/user_dashboard.css') }}">
  <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

  <script src="{{ url_for('static', filename='js/firebase-config.js') }}"></script>

  <!-- Firebase Initialization -->
  <script>
    firebase.initializeApp(firebaseConfig);
  </script>

  <script defer src="{{ url_for('static', filename='js/user_dashboard.js') }}"></script>
</head>
<body>
  <header class="app-header">
    <img src="{{ url_for('static', filename='images/logo.png') }}" alt="Logo" class="header-logo">
    <div class="header-spacer"></div>
    <img src="{{ url_for('static', filename='images/profile.jpg') }}" alt="Profile" class="header-profile">
  </header>

  <div class="dashboard-wrapper">
    <nav class="sidebar">
      <h2>F1 Fantasy</h2>
      <ul>
        <li><a href="/user_dashboard">Home</a></li>
        <li><a href="/leagues">Leagues</a></li>
        <li><a href="/user_data#teams">Teams</a></li>
        <li><a href="/user_data#drivers">Drivers</a></li>
        <li><a href="/user_data#calendar">Race Calendar</a></li>
      </ul>
    </nav>

    <main class="main-content">
      <!-- Fantasy Teams -->
      <section class="fantasy-teams">
        <h2>Fantasy Teams</h2>
        <button class="create-team-btn" onclick="openFantasyModal()">Create Fantasy Team</button>
        <div class="team-cards" id="fantasyGrid"></div>
      </section>

      <!-- Race Results -->
      <section class="race-results">
        <h2>Race Results</h2>
        <div class="race-cards" id="raceGrid"></div>
      </section>
    </main>
  </div>

  <!-- Fantasy Team Creation Modal -->
  <div id="fantasyModal" class="modal-overlay" style="display:none;">
    <form id="fantasyForm" class="modal-content">
      <h3>Create Fantasy Team</h3>
      <input name="name" placeholder="Team Name" required />
      <div id="driverSelects"></div>
      <select name="team" id="teamSelect"></select>
      <p id="budgetTracker">Total Budget: $0</p>
      <button type="submit">Submit</button>
      <button type="button" onclick="closeFantasyModal()">Cancel</button>
    </form>
  </div>

  <div id="raceModal" class="modal-overlay" style="display:none;">
    <div class="modal-content" id="raceModalContent">
      <h3>Race Results</h3>
      <p id="raceMeta"></p>
      <ul id="raceDriverList"></ul>
      <button onclick="closeRaceModal()">Close</button>
    </div>
  </div>
</body>
</html>